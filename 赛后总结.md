##  2021年中国大学生保险数字挑战赛参赛总结

[TOC]



#### 比赛成绩

A榜排名第8，分数 0.90578985 ；B榜排名第11，分数0.90607387 。

#### 赛题理解

本次比赛赛题是预测车险续保客户随车非车购买结果，本质上是一个二分类问题。其中训练集中的数据量为 684283， 测试集为80110，数据量不是很大。数据包含以下65个字段：

| 字段名                      | 说明                                         |
| :-------------------------- | :------------------------------------------- |
| client_no                   | 客户号                                       |
| dpt                         | 机构：共有 11 个机构，以三位数为代码，如 210 |
| xz                          | 险种：“商交”，“单交”                         |
| xb                          | 险别：“交三”，“主全”，“单交”                 |
| carid                       | 标的号（**主键**）                           |
| nprem_ly                    | 上年车险保费                                 |
| ncd_ly                      | 上年 NCD                                     |
| newvalue                    | 新车购置价                                   |
| bi_renewal_year             | 车险续保年限                                 |
| clmnum                      | 车险出险次数                                 |
| regdate                     | 初登日期                                     |
| trademark_cn                | 品牌                                         |
| brand_cn                    | 厂牌中文名称                                 |
| make_cn                     | 车型中文名称                                 |
| series                      | 车系                                         |
| capab                       | 排汽量                                       |
| seats                       | 座位数                                       |
| use_type                    | 使用性质：“营业”，“非营业”                   |
| change_owner                | 是否过户车辆标志：“非过户投保”，“过户投保”   |
| nprem_od                    | 车损险保费                                   |
| si_od                       | 车损险保额                                   |
| nprem_tp                    | 商三险保费                                   |
| si_tp                       | 商三险保额                                   |
| nprem_bt                    | 盗抢保费                                     |
| si_bt                       | 盗抢保额                                     |
| nprem_vld                   | 司机座位责任险保费                           |
| si_vld                      | 司机座位责任险保额                           |
| nprem_vlp                   | 乘客座位责任险保费                           |
| si_vlp                      | 乘客座位责任险保额                           |
| p1_prior_days_to_insure     | 提前签单时间                                 |
| suiche_nonauto_nprem_20     | 20 年随车非车保费                            |
| suiche_nonauto_nprem_19     | 19 年随车非车保费                            |
| suiche_nonauto_nprem_18     | 18 年随车非车保费                            |
| suiche_nonauto_nprem_17     | 17 年随车非车保费                            |
| suiche_nonauto_nprem_16     | 16 年随车非车保费                            |
| suiche_nonauto_amount_20    | 20 年随车非车保额                            |
| suiche_nonauto_amount_19    | 19 年随车非车保额                            |
| suiche_nonauto_amount_18    | 18 年随车非车保额                            |
| suiche_nonauto_amount_17    | 17 年随车非车保额                            |
| suiche_nonauto_amount_16    | 16 年随车非车保额                            |
| num_notcar_claim            | 近 3 年非车出险次数                          |
| p1_gender                   | 性别：“男”，“女”                             |
| p1_age                      | 年龄                                         |
| p1_census_register          | 籍贯：xx 省 xx 市                            |
| p2_marital_status           | 婚姻：“未婚”，“已婚”                         |
| f1_child_flag               | 是否有子女                                   |
| f2_posses_house_flag        | 是否有房                                     |
| f2_cust_housing_price_total | 房产总价（万）                               |
| f1_annual_income            | 年收入，等级数据                             |
| p2_client_grade             | 车主俱乐部客户等级                           |
| w1_pc_wx_use_flag           | 是否产险微信粉丝                             |
| p1_is_bank_eff              | 是否银行有效客户                             |
| p2_is_enterprise_owner      | 是否为企业主                                 |
| p2_is_smeowner              | 是否为小微企业主                             |
| active_7                    | 近 7 日活跃天数                              |
| active_30                   | 近 30 日活跃天数                             |
| active_90                   | 近 90 日活跃天数                             |
| active_365                  | 近 365 日活跃天数                            |
| p2_is_child_under_15_family | 家庭是否有 15 岁以下小孩                     |
| p2_is_adult_over_55_family  | 家庭是否有 55 岁以上老人                     |
| birth_month                 | 生日月份                                     |
| p1_service_offer_cnt        | 当月累计发放服务次数                         |
| p3_service_use_cnt          | 当月累计使用服务次数                         |
| dur_personal_insurance_90   | 点击时长非车险_90 天                         |
| service_score_available     | 有效积分                                     |

这里主要有用户的静态特征、车辆信息、车险信息、历史非车购买记录及APP端线上行为等字段，其中用户历史非车购买记录、机构、时间特征要重点关注。

另外赛题的评价指标为AUC，所以只用预测出购买概率就行了。

#### 特征工程

##### 数据清洗

数据的标签正负样本比大概是1：3，比例比较正常。

我们通过分析，发现use_type、change_owner  、suiche_nonauto_nprem_18、suiche_nonauto_amount_18这四个字段的特征分布很不平衡，所以直接去掉了。

然后， p1_gender、p1_age字段存在缺失值。这是一些很基础的特征，不太应该缺失。所以我们用-1来进行填充，单独分析缺失值的统计特征。

##### 特征构造

- 比例特征
  - 所有的险费险额做比。这样可以反映出不同保额的保费分布情况，类似于性价比。
  - 对活跃天数做比。这样可以反映出用户使用app的活跃趋势。
  - 非车保费的占总保费（车险保费+非车保费）比例。可以反映出用户购买非车意愿。
  - 司机座位责任险保费和乘客座位责任险保费占车险保费的比例。可以反映出对司机乘客的重视程度。例如某些群体可能是雇佣司机的、家庭中对非车重视程度等等。
  - 还有一些常见的比例特征就不展开说了，有当月累计发放服务次数/当月累计使用服务次数、点击时长非车险_90 天/近 90 日活跃天数。
- 时间特征
  -  初登日期，提取出年月日特征
  - 生日月份， 利用年龄字段算出出生年份，再根据生日月份得到出生年月
- 差值特征
  - 16年到20年的保费如果使用比例方式来表示特征会发生过拟合，所以这里对保费使用差值来表示变化特征。这个可以提二、三个千。
- 类别特征编码
  - 对类别特征进行标签编码，频率编码、目标编码。其中对于保额这种数据，虽然是数值，但每个阶段数值跨度都很大，完全可以当作类别特征。使用保额当作类别特征进行统计可以提升5个k左右。
- 特征交叉
  - 类别特征与数值特征之间的交叉。利用年龄、籍贯、车品牌、机构以及上面说到的保额特征来对保费、提前签单时间、用户活跃天数、新车购买价格等数值特征分组聚合平均值、方差等统计特征。
  - 类别特征与类别特征之间的交叉。就是求类别特征的共现次数，具体做法将类别特征两两相加得到新特征。其中存在大量是否特征，这里我使用类似于二进制的形式，将是否特征组合成一类特征。

#### 算法模型

模型使用的是lgb，简单的五折交叉验证。

#### 不足

以上明显不足的地方是模型方面没有做模型调参、融合之类的操作。另外就是有很多冗余的特征、没有进行特征筛选。

特征方面我们发现保额特征虽然可以当作类别特征，但是保额特征之间有很强的关联，所以或许可以采取降维方法效果会更好。历史保额信息或许可以当作一种用户的历史行为记录使用word2vec得到embedding特征。不过这些想法并没有来得及尝试。

